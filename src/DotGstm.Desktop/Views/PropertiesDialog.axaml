<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="using:DotGstm.Desktop.ViewModels"
        x:Class="DotGstm.Desktop.Views.PropertiesDialog"
        x:DataType="vm:PropertiesDialogViewModel"
        Title="gSTM: Configure tunnel settings"
        Width="729" Height="738"
        MinWidth="729" MinHeight="738"
        MaxWidth="729" MaxHeight="738"
        CanResize="False"
        WindowStartupLocation="CenterOwner"
        Background="#EDEDED"
        Icon="/Assets/Images/gSTM.png">

  <Window.Styles>
    <!-- ç§»é™¤ DataGrid Cell ç„¦é»žé»‘æ¡† -->
    <Style Selector="DataGridCell:focus /template/ Grid#FocusVisual">
      <Setter Property="IsVisible" Value="False" />
    </Style>
    <!-- ç¸®å° DataGrid Header çš„ Paddingï¼Œä¸¦åŠ å…¥æ ¼ç·š -->
    <Style Selector="DataGridColumnHeader">
      <Setter Property="Padding" Value="3,2" />
      <Setter Property="BorderBrush" Value="#C0C0C0" />
      <Setter Property="BorderThickness" Value="0,0,1,1" />
    </Style>
  </Window.Styles>

  <DockPanel Margin="10">

    <!-- åº•éƒ¨æŒ‰éˆ• -->
    <StackPanel DockPanel.Dock="Bottom"
                Orientation="Horizontal"
                HorizontalAlignment="Right"
                Margin="0,10,0,0"
                Spacing="8">
      <Button x:Name="BtnCancel" Width="100" Height="32" HotKey="Alt+C" Click="BtnCancel_Click">
        <StackPanel Orientation="Horizontal" Spacing="5">
          <TextBlock Text="â—" Foreground="Red" FontSize="14" VerticalAlignment="Center" />
          <TextBlock Text="å–æ¶ˆ(C)" VerticalAlignment="Center" />
        </StackPanel>
      </Button>
      <Button x:Name="BtnOk" Width="100" Height="32" IsDefault="True" HotKey="Alt+O" Click="BtnOk_Click">
        <StackPanel Orientation="Horizontal" Spacing="5">
          <TextBlock Text="âœ“" Foreground="Blue" FontSize="14" FontWeight="Bold" VerticalAlignment="Center" />
          <TextBlock Text="ç¢ºå®š(O)" VerticalAlignment="Center" />
        </StackPanel>
      </Button>
    </StackPanel>

    <!-- ä¸»è¦å…§å®¹ï¼šä¸Šä¸‹åˆ†å‰² -->
    <DockPanel>

      <!-- ä¸ŠåŠéƒ¨ï¼šæ‰€æœ‰é€£æŽ¥è¨­å®š (å·¦ä¸­å³ä¸‰æ¬„) -->
      <Grid DockPanel.Dock="Top" ColumnDefinitions="1*,1*,1*" RowDefinitions="Auto,Auto" ColumnSpacing="10" RowSpacing="8">

        <!-- å·¦æ¬„ -->
        <StackPanel Grid.Column="0" Grid.Row="0" Spacing="8">

          <!-- Name -->
          <Grid ColumnDefinitions="55,*">
            <TextBlock Grid.Column="0" Text="Name:" VerticalAlignment="Center" />
            <TextBox Grid.Column="1" x:Name="TxtName" Text="{Binding Name}" />
          </Grid>

          <!-- Preset -->
          <Grid ColumnDefinitions="55,*">
            <TextBlock Grid.Column="0" Text="Preset:" VerticalAlignment="Center" />
            <ComboBox Grid.Column="1"
                      x:Name="CmbPreset"
                      ItemsSource="{Binding Presets}"
                      SelectedIndex="{Binding SelectedPresetIndex}" />
          </Grid>

          <!-- Presets èªªæ˜Ž -->
          <TextBlock Text="Presets are read from ~/.ssh/config."
                     FontSize="10"
                     Foreground="#666666"
                     Margin="0,0,0,0" />

        </StackPanel>

        <!-- ä¸­æ¬„ -->
        <StackPanel Grid.Column="1" Grid.Row="0" Spacing="8">

          <!-- User -->
          <Grid ColumnDefinitions="Auto,*">
            <TextBlock Grid.Column="0" Text="User:" Width="50" VerticalAlignment="Center" />
            <TextBox Grid.Column="1"
                     x:Name="TxtUser"
                     Text="{Binding User}"
                     IsEnabled="{Binding IsConnectionFieldsEnabled}" />
          </Grid>

          <!-- Host -->
          <Grid ColumnDefinitions="Auto,*">
            <TextBlock Grid.Column="0" Text="Host:" Width="50" VerticalAlignment="Center" />
            <TextBox Grid.Column="1"
                     x:Name="TxtHost"
                     Text="{Binding Host}"
                     IsEnabled="{Binding IsConnectionFieldsEnabled}" />
          </Grid>

          <!-- Port -->
          <Grid ColumnDefinitions="Auto,*">
            <TextBlock Grid.Column="0" Text="Port:" Width="50" VerticalAlignment="Center" />
            <TextBox Grid.Column="1"
                     x:Name="TxtPort"
                     Text="{Binding Port}"
                     IsEnabled="{Binding IsConnectionFieldsEnabled}"
                     Width="80"
                     HorizontalAlignment="Left" />
          </Grid>

          <!-- Locate Private Key æŒ‰éˆ• -->
          <Button x:Name="BtnLocateKey"
                  Content="âš² Locate Private Key..."
                  Click="BtnBrowse_Click"
                  HorizontalAlignment="Stretch"
                  Height="28"
                  Margin="0,4,0,0" />

        </StackPanel>

        <!-- å³æ¬„ -->
        <StackPanel Grid.Column="2" Grid.Row="0" Spacing="6">

          <!-- Checkboxes -->
          <CheckBox x:Name="ChkAutoStart"
                    Content="Auto-start on launch"
                    IsChecked="{Binding AutoStart}"
                    Margin="0,0,0,3" />
          <CheckBox x:Name="ChkRestart"
                    Content="Auto-restart on failure"
                    IsChecked="{Binding AutoRestart}"
                    Margin="0,0,0,3" />
          <CheckBox x:Name="ChkNotify"
                    Content="Notify when restarted"
                    IsChecked="{Binding Notify}"
                    Margin="0,0,0,3" />

          <!-- Max restarts -->
          <Grid ColumnDefinitions="Auto,Auto" Margin="0,3" ColumnSpacing="10">
            <TextBlock Grid.Column="0"
                       Text="Max restarts:"
                       VerticalAlignment="Center" />
            <TextBox Grid.Column="1"
                     x:Name="TxtMaxRestarts"
                     Text="{Binding MaxRestarts}"
                     Width="50"
                     HorizontalAlignment="Left" />
          </Grid>

        </StackPanel>

        <!-- Privkey æ©«è·¨ä¸­é–“å’Œå³é‚Šå…©æ¬„ -->
        <Grid Grid.Column="1" Grid.ColumnSpan="2" Grid.Row="1" ColumnDefinitions="60,*">
          <TextBlock Grid.Column="0" Text="Privkey:" VerticalAlignment="Center" />
          <TextBox Grid.Column="1"
                   x:Name="TxtPrivkey"
                   Text="{Binding PrivateKey}"
                   IsEnabled="{Binding IsConnectionFieldsEnabled}" />
        </Grid>

      </Grid>

      <!-- ä¸‹åŠéƒ¨ï¼šå·¦å³å…©æ¬„ï¼ˆDataGrid + æŒ‰éˆ•èªªæ˜Žï¼‰ -->
      <Grid ColumnDefinitions="2*,1*" ColumnSpacing="10" Margin="0,10,0,0">

        <!-- å·¦ä¸‹ï¼šPort Redirections DataGrid -->
        <Border Grid.Column="0"
                BorderBrush="#C0C0C0"
                BorderThickness="1"
                Background="White">
          <DataGrid x:Name="RedirList"
                    ItemsSource="{Binding PortRedirections}"
                    SelectedItem="{Binding SelectedRedirection}"
                    AutoGenerateColumns="False"
                    IsReadOnly="True"
                    GridLinesVisibility="None"
                    HeadersVisibility="Column"
                    SelectionMode="Single"
                    Background="White">
            <DataGrid.Columns>
              <DataGridTextColumn Header="Type" Binding="{Binding Type}" Width="70" />
              <DataGridTextColumn Header="Port" Binding="{Binding Port}" Width="170" />
              <DataGridTextColumn Header="To host" Binding="{Binding ToHost}" Width="150" />
              <DataGridTextColumn Header="To port" Binding="{Binding ToPort}" Width="70" />
            </DataGrid.Columns>
          </DataGrid>
        </Border>

        <!-- å³ä¸‹ï¼šæŒ‰éˆ•å’Œèªªæ˜Žæ–‡å­— -->
        <StackPanel Grid.Column="1" Spacing="5">

          <!-- åŠ å…¥/ç·¨è¼¯/åˆªé™¤æŒ‰éˆ• (åž‚ç›´æŽ’åˆ—) -->
          <Button x:Name="BtnAdd"
                  Height="28"
                  HorizontalAlignment="Stretch"
                  HotKey="Alt+A"
                  Click="BtnAddRedir_Click">
            <StackPanel Orientation="Horizontal" Spacing="5">
              <TextBlock Text="+" Foreground="Blue" FontSize="16" FontWeight="Bold" VerticalAlignment="Center" />
              <TextBlock Text="åŠ å…¥(A)" VerticalAlignment="Center" />
            </StackPanel>
          </Button>
          <Button x:Name="BtnEdit"
                  Height="28"
                  HorizontalAlignment="Stretch"
                  HotKey="Alt+E"
                  Click="BtnEditRedir_Click">
            <StackPanel Orientation="Horizontal" Spacing="5">
              <TextBlock Text="ðŸ“" FontSize="12" VerticalAlignment="Center" />
              <TextBlock Text="ç·¨è¼¯(E)" VerticalAlignment="Center" />
            </StackPanel>
          </Button>
          <Button x:Name="BtnDelete"
                  Height="28"
                  HorizontalAlignment="Stretch"
                  HotKey="Alt+D"
                  Click="BtnDeleteRedir_Click">
            <StackPanel Orientation="Horizontal" Spacing="5">
              <TextBlock Text="Ã—" Foreground="Red" FontSize="18" FontWeight="Bold" VerticalAlignment="Center" />
              <TextBlock Text="åˆªé™¤(D)" VerticalAlignment="Center" />
            </StackPanel>
          </Button>

          <!-- èªªæ˜Žæ–‡å­— (ç„¡æ¡†ç„¡èƒŒæ™¯) -->
          <TextBlock TextWrapping="Wrap" FontSize="10.5" Foreground="#555555" LineHeight="16" Margin="0,10,0,0">
            <Run Text="Privkey is optional; Only used for public key authentication." />
            <LineBreak />
            <LineBreak />
            <Run Text="Note: For public key authentication, server key must be in" />
            <LineBreak />
            <Run Text="~/.ssh/authorized_keys." />
            <LineBreak />
            <Run Text="Connect from a terminal using ssh to accomplish this." />
            <LineBreak />
            <LineBreak />
            <Run Text="Tooltips are avaliable for everything in this window. Hold the mouse over an option to see more information on what it does." FontWeight="Bold" />
          </TextBlock>

        </StackPanel>

      </Grid>

    </DockPanel>

  </DockPanel>

</Window>
